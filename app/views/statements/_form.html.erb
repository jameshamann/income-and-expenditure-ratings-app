<%= form_with(model: statement) do |form| %>
  <% if statement.errors.any? %>
    <div class="alert alert-danger">
      <h4 class="alert-heading"><%= pluralize(statement.errors.count, "error") %> prohibited this statement from being saved:</h4>
      <ul>
        <% statement.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="statementFields" data-controller="statements">
    <div class="mb-3">
      <%= form.label :month, class: 'form-label' %>
      <%= form.date_field :month, class: 'form-control' %>
    </div>

    <div class="mb-3">
      <h5>Incomes</h5>
      <div id="income-fields" data-statements-target="incomeFields">
        <div class="incomeField input-group mb-3">
          <%= form.label 'income[0][name]', "Income Name", class: 'form-label' %>
          <%= form.text_field 'income[0][name]', class: 'form-control' %>
          <%= form.label 'income[0][value]', "Income Value", class: 'form-label' %>
          <%= form.text_field 'income[0][value]', class: 'form-control', step: 0.01, placeholder: '0.00', type:'number' %>
        </div>
      </div>
      <button type="button" class="btn btn-secondary mb-3" data-action="statements#addIncomeField">Add Income</button>
    </div>

    <div class="mb-3">
      <h5>Expenditures</h5>
      <div id="expenditure-fields" data-statements-target="expenditureFields">
        <div class="expenditureField input-group mb-3">
         <%= form.label 'expenditure[0][name]', "Expenditure Name", class: 'form-label' %>
          <%= form.text_field 'expenditure[0][name]', class: 'form-control' %>
          <%= form.label 'expenditure[0][value]', "Expenditure Value", class: 'form-label' %>
          <%= form.text_field 'expenditure[0][value]', class: 'form-control', step:0.01, placeholder: '0.00', type:'number' %>
        </div>
      </div>
      <button type="button" class="btn btn-secondary mb-3" data-action="statements#addExpenditureField">Add Expenditure</button>
    </div>

    <div>
      <%= form.submit 'Save Statement', class: "btn btn-primary mb-3" %>
    </div>
  </div>
<% end %>
